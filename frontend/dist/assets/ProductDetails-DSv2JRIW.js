import{u as z,b as F,a as N,r as i,j as e,e as P}from"./index-CVeIW3aN.js";import{c as W,d as k,e as L}from"./products-CEl1zu1k.js";import{b as C,f as A}from"./cartActions-CU3eFJI2.js";function M({product:r}){const l=z(),d=F(),{user:t}=N(),[a,c]=i.useState(!1),[m,p]=i.useState(1),[f,h]=i.useState([]),o=(s,n="info")=>{const v=Date.now();h(g=>[...g,{id:v,message:s,type:n}]),setTimeout(()=>{h(g=>g.filter(w=>w.id!==v))},4e3)},b=async()=>{if(!t){o("Please sign in to add items to cart","error"),setTimeout(()=>d("/login"),2e3);return}if(r.stock===0){o("This item is out of stock","error");return}if(m>r.stock){o(`Only ${r.stock} items available in stock`,"error");return}try{c(!0);const s=await l(C(r,m));s.success?o(`${m} x ${r.title} added to cart!`,"success"):o(s.message,"error")}catch{o("Failed to add item to cart","error")}finally{c(!1)}},j=async()=>{if(!t){o("Please sign in to continue","error"),setTimeout(()=>d("/login"),2e3);return}if(r.stock===0){o("This item is out of stock","error");return}if(m>r.stock){o(`Only ${r.stock} items available in stock`,"error");return}try{c(!0);const s=await l(C(r,m));s.success?(o("Redirecting to checkout...","success"),setTimeout(()=>d("/checkout"),1e3)):o(s.message,"error")}catch{o("Failed to proceed with purchase","error")}finally{c(!1)}};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed top-4 right-4 z-50 space-y-2",children:f.map(s=>e.jsx("div",{className:`px-6 py-4 rounded-2xl shadow-2xl text-white transition-all duration-300 transform animate-slide-in-right backdrop-blur-sm border ${s.type==="success"?"bg-gradient-to-r from-green-500 to-emerald-600 border-green-400/50":s.type==="error"?"bg-gradient-to-r from-red-500 to-red-600 border-red-400/50":"bg-gradient-to-r from-blue-500 to-indigo-600 border-blue-400/50"}`,children:e.jsxs("div",{className:"flex items-center space-x-2",children:[s.type==="success"?e.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}):s.type==="error"?e.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}):e.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),e.jsx("span",{className:"font-medium",children:s.message})]})},s.id))}),e.jsxs("div",{className:"space-y-6",children:[r.stock>0&&e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 p-6 rounded-2xl border border-blue-200/50 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("label",{htmlFor:"quantity",className:"text-lg font-bold text-gray-900 flex items-center",children:[e.jsx("svg",{className:"w-5 h-5 mr-2 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 4V2a1 1 0 011-1h8a1 1 0 011 1v2h4a1 1 0 011 1v2a1 1 0 01-1 1h-1v10a2 2 0 01-2 2H6a2 2 0 01-2-2V8H3a1 1 0 01-1-1V5a1 1 0 011-1h4z"})}),"Quantity"]}),e.jsxs("div",{className:"bg-gradient-to-r from-green-100 to-emerald-100 px-3 py-1 rounded-full text-sm font-medium text-green-800",children:[r.stock," in stock"]})]}),e.jsx("select",{id:"quantity",value:m,onChange:s=>p(parseInt(s.target.value)),className:"w-full px-4 py-3 bg-white/60 backdrop-blur-sm border border-gray-300/50 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-300 font-medium shadow-sm text-lg",disabled:a,children:[...Array(Math.min(r.stock,10))].map((s,n)=>e.jsxs("option",{value:n+1,children:[n+1," ",n===0?"item":"items"]},n+1))}),r.stock>10&&e.jsx("p",{className:"text-sm text-gray-500 mt-2 bg-white/60 px-3 py-1 rounded-full inline-block",children:"Maximum 10 per order"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("button",{onClick:b,disabled:r.stock===0||a,className:`w-full font-bold py-4 px-6 rounded-2xl transition-all duration-300 text-lg relative overflow-hidden group shadow-lg ${r.stock===0||a?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-gradient-to-r from-yellow-400 via-yellow-500 to-orange-500 hover:from-yellow-500 hover:via-yellow-600 hover:to-orange-600 text-gray-900 hover:shadow-xl transform hover:scale-105 active:scale-95"}`,children:[e.jsx("span",{className:"relative z-10 flex items-center justify-center space-x-2",children:a?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"loading-spinner w-5 h-5"}),e.jsx("span",{children:"Adding to Cart..."})]}):r.stock===0?e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728L5.636 5.636m12.728 12.728L18.364 5.636M5.636 18.364l12.728-12.728"})}),e.jsx("span",{children:"Out of Stock"})]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 3h2l.4 2M7 13h10l4-8H5.4m0 0L7 13m0 0l-2.5 5M7 13l2.5 5M17 21a2 2 0 100-4 2 2 0 000 4zM9 21a2 2 0 100-4 2 2 0 000 4z"})}),e.jsx("span",{children:"Add to Cart"})]})}),r.stock>0&&!a&&e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent -translate-x-full group-hover:translate-x-full transition-transform duration-700 ease-out"})]}),e.jsxs("button",{onClick:j,disabled:r.stock===0||a,className:`w-full font-bold py-4 px-6 rounded-2xl transition-all duration-300 text-lg relative overflow-hidden group shadow-lg ${r.stock===0||a?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-gradient-to-r from-orange-500 via-red-500 to-pink-500 hover:from-orange-600 hover:via-red-600 hover:to-pink-600 text-white hover:shadow-xl transform hover:scale-105 active:scale-95"}`,children:[e.jsx("span",{className:"relative z-10 flex items-center justify-center space-x-2",children:a?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"loading-spinner w-5 h-5"}),e.jsx("span",{children:"Processing..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),e.jsx("span",{children:"Buy Now"})]})}),r.stock>0&&!a&&e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent -translate-x-full group-hover:translate-x-full transition-transform duration-700 ease-out"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 pt-4",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-blue-100 p-4 rounded-xl border border-blue-200/50 shadow-sm",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("span",{className:"text-sm font-medium text-blue-800",children:"30-day return policy"})]})}),e.jsx("div",{className:"bg-gradient-to-r from-green-50 to-green-100 p-4 rounded-xl border border-green-200/50 shadow-sm",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("svg",{className:"w-5 h-5 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})}),e.jsx("span",{className:"text-sm font-medium text-green-800",children:"Free shipping available"})]})})]})]})]})}function T({image:r}){return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"relative w-full h-96 bg-gradient-to-br from-gray-50 to-gray-100 rounded-2xl overflow-hidden shadow-lg group",children:r?e.jsxs(e.Fragment,{children:[e.jsx("img",{src:r,alt:"Main product",className:"w-full h-full object-contain transition-transform duration-500 group-hover:scale-105"}),e.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/5 transition-all duration-300 flex items-center justify-center",children:e.jsx("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity duration-300 bg-white/90 backdrop-blur-sm px-4 py-2 rounded-full shadow-lg",children:e.jsxs("div",{className:"flex items-center space-x-2 text-gray-700",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0zM10 7v3m0 0v3m0-3h3m-3 0H7"})}),e.jsx("span",{className:"text-sm font-medium",children:"Hover to zoom"})]})})})]}):e.jsxs("div",{className:"w-full h-full flex flex-col items-center justify-center text-gray-400 bg-gradient-to-br from-gray-100 to-gray-200",children:[e.jsx("div",{className:"w-16 h-16 mb-4 bg-gradient-to-br from-gray-300 to-gray-400 rounded-full flex items-center justify-center shadow-lg",children:e.jsx("svg",{className:"w-8 h-8 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),e.jsx("span",{className:"text-lg font-medium text-gray-500",children:"No Image Available"}),e.jsx("span",{className:"text-sm text-gray-400 mt-1",children:"Product image will appear here"})]})}),e.jsxs("div",{className:"flex space-x-3",children:[r&&e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-gray-100 to-gray-200 rounded-xl overflow-hidden shadow-md border-2 border-blue-400",children:e.jsx("img",{src:r,alt:"Thumbnail",className:"w-full h-full object-contain"})}),[1,2,3].map((l,d)=>e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-gray-50 to-gray-100 rounded-xl border border-gray-200 flex items-center justify-center opacity-50",children:e.jsx("svg",{className:"w-6 h-6 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})},d))]})]})}function $({review:r}){const l=d=>new Date(d).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});return e.jsxs("div",{className:"group hover:transform hover:scale-[1.01] transition-all duration-300",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-400 to-indigo-600 rounded-full flex items-center justify-center shadow-lg",children:e.jsx("span",{className:"text-white font-bold text-sm",children:(r.user||"A").charAt(0).toUpperCase()})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-gray-900 text-lg",children:r.user||"Anonymous User"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Verified Purchase"})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"flex space-x-1",children:[...Array(5)].map((d,t)=>e.jsx("span",{className:`text-lg transition-colors duration-200 ${t<r.rating?"text-yellow-400 drop-shadow-sm":"text-gray-300"}`,children:"★"},t))}),e.jsxs("span",{className:"bg-gradient-to-r from-yellow-100 to-orange-100 text-yellow-800 px-3 py-1 rounded-full text-sm font-medium shadow-sm",children:[r.rating,".0 out of 5"]})]})]}),e.jsx("div",{className:"bg-gradient-to-r from-gray-100 to-gray-200 px-4 py-2 rounded-full shadow-sm",children:e.jsx("span",{className:"text-sm font-medium text-gray-600",children:l(r.created_at)})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h5",{className:"font-bold text-xl text-gray-900 leading-tight",children:r.title}),e.jsx("div",{className:"bg-gradient-to-r from-gray-50 to-blue-50/30 p-4 rounded-xl border-l-4 border-blue-400 shadow-sm",children:e.jsx("p",{className:"text-gray-700 leading-relaxed font-medium",children:r.content})})]})]})}function H({productId:r,onReviewSubmitted:l,onCancel:d}){const{user:t}=N(),[a,c]=i.useState({title:"",content:"",rating:5}),[m,p]=i.useState(!1),[f,h]=i.useState(null),o=s=>{const{name:n,value:v}=s.target;c(g=>({...g,[n]:v}))},b=s=>{c(n=>({...n,rating:s}))},j=async s=>{if(s.preventDefault(),!t){h("You must be logged in to write a review");return}if(!a.title.trim()||!a.content.trim()){h("Please fill in all fields");return}try{p(!0),h(null),await W(r,a),c({title:"",content:"",rating:5}),l&&l()}catch(n){console.error("Failed to submit review:",n),n.response?.status===400?h("You have already reviewed this product"):h("Failed to submit review. Please try again.")}finally{p(!1)}};return t?e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm p-8 rounded-2xl border border-white/30 shadow-2xl",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-full flex items-center justify-center shadow-lg",children:e.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})}),e.jsx("h3",{className:"text-2xl font-bold bg-gradient-to-r from-gray-900 to-gray-600 bg-clip-text text-transparent",children:"Write Your Review"})]}),f&&e.jsx("div",{className:"bg-gradient-to-r from-red-50 to-red-100 border-l-4 border-red-500 p-4 rounded-2xl mb-6 shadow-sm animate-shake",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("svg",{className:"w-5 h-5 text-red-500 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),e.jsx("span",{className:"text-red-700 font-medium",children:f})]})}),e.jsxs("form",{onSubmit:j,className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-r from-yellow-50 to-orange-50 p-6 rounded-2xl border border-yellow-200/50 shadow-sm",children:[e.jsxs("label",{className:"text-lg font-bold text-gray-900 mb-4 flex items-center",children:[e.jsx("svg",{className:"w-5 h-5 mr-2 text-yellow-500",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})}),"Rate this product"]}),e.jsx("div",{className:"flex items-center space-x-2 mb-3",children:[1,2,3,4,5].map(s=>e.jsx("button",{type:"button",onClick:()=>b(s),className:`text-3xl transition-all duration-200 transform hover:scale-110 ${s<=a.rating?"text-yellow-400 hover:text-yellow-500 drop-shadow-sm":"text-gray-300 hover:text-gray-400"}`,children:"★"},s))}),e.jsxs("p",{className:"text-sm font-medium text-gray-600 bg-white/60 px-3 py-1 rounded-full inline-block",children:[a.rating," out of 5 stars"]})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"title",className:"text-lg font-bold text-gray-900 mb-3 flex items-center",children:[e.jsx("svg",{className:"w-5 h-5 mr-2 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})}),"Review Title"]}),e.jsx("input",{type:"text",id:"title",name:"title",value:a.title,onChange:o,placeholder:"Summarize your review in a few words...",className:"w-full px-4 py-3 bg-white/60 backdrop-blur-sm border border-gray-300/50 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-300 placeholder-gray-400 font-medium shadow-sm",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"content",className:"text-lg font-bold text-gray-900 mb-3 flex items-center",children:[e.jsx("svg",{className:"w-5 h-5 mr-2 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),"Your Experience"]}),e.jsx("textarea",{id:"content",name:"content",value:a.content,onChange:o,placeholder:"Tell others about your experience with this product. What did you like or dislike? How was the quality? Would you recommend it?",rows:5,className:"w-full px-4 py-3 bg-white/60 backdrop-blur-sm border border-gray-300/50 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-300 placeholder-gray-400 font-medium shadow-sm resize-none",required:!0})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 pt-4",children:[e.jsxs("button",{type:"submit",disabled:m,className:"flex-1 btn-primary relative overflow-hidden group disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",children:[e.jsx("span",{className:"relative z-10 flex items-center justify-center space-x-2",children:m?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"loading-spinner w-5 h-5"}),e.jsx("span",{children:"Publishing Review..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})}),e.jsx("span",{children:"Publish Review"})]})}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent -translate-x-full group-hover:translate-x-full transition-transform duration-700 ease-out"})]}),d&&e.jsx("button",{type:"button",onClick:d,className:"flex-1 sm:flex-none px-6 py-3 bg-white/60 backdrop-blur-sm text-gray-700 font-bold rounded-xl border border-gray-300/50 hover:bg-gray-50 hover:border-gray-400 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 transition-all duration-300 shadow-sm hover:shadow-md",children:"Cancel"})]})]})]}):e.jsx("div",{className:"bg-gradient-to-r from-amber-50 to-orange-50 p-8 rounded-2xl border border-amber-200/50 shadow-lg",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-gradient-to-br from-amber-400 to-orange-500 rounded-full flex items-center justify-center shadow-lg",children:e.jsx("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),e.jsx("p",{className:"text-gray-700 text-lg font-medium mb-4",children:"Share your experience with other customers"}),e.jsxs("a",{href:"/login",className:"inline-flex items-center space-x-2 bg-gradient-to-r from-blue-600 to-indigo-600 text-white font-bold py-3 px-6 rounded-xl hover:from-blue-700 hover:to-indigo-700 transition-all duration-300 shadow-lg hover:shadow-xl transform hover:scale-105",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1"})}),e.jsx("span",{children:"Sign In to Write a Review"})]})]})})}function I(){const{id:r}=P(),{user:l}=N(),d=z(),[t,a]=i.useState(null),[c,m]=i.useState([]),[p,f]=i.useState(!0),[h,o]=i.useState(!0),[b,j]=i.useState(null),[s,n]=i.useState(!1),[v,g]=i.useState(!1);i.useEffect(()=>{l&&d(A())},[l,d]),i.useEffect(()=>{(async()=>{try{f(!0),o(!0),j(null);const[x,y]=await Promise.all([k(r),L(r)]);if(a(x.data),m(y.data),l&&y.data.length>0){const R=`${l.first_name||""} ${l.last_name||""}`.trim()||l.email,B=y.data.find(S=>S.user===R);g(!!B)}}catch(x){console.error("Failed to fetch product:",x),j("Could not load product. Please try again later.")}finally{f(!1),o(!1)}})()},[r,l]);const w=async()=>{try{const u=await L(r);m(u.data),n(!1),g(!0);const x=await k(r);a(x.data)}catch(u){console.error("Failed to refresh reviews:",u)}};return p?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:"Loading product..."}):b?e.jsx("div",{className:"min-h-screen flex items-center justify-center text-red-600",children:b}):t?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50/30 to-indigo-50/30 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 bg-gradient-to-br from-blue-400/5 to-indigo-400/5 rounded-full blur-3xl"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-80 h-80 bg-gradient-to-tr from-purple-400/5 to-pink-400/5 rounded-full blur-3xl"}),e.jsxs("div",{className:"relative z-10 max-w-7xl mx-auto px-4 py-8",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[e.jsx("div",{className:"lg:w-1/2",children:e.jsx("div",{className:"glass-card p-6 rounded-3xl shadow-2xl border border-white/30",children:e.jsx(T,{image:t.image})})}),e.jsx("div",{className:"lg:w-1/2",children:e.jsxs("div",{className:"glass-card p-8 rounded-3xl shadow-2xl border border-white/30",children:[e.jsx("h1",{className:"text-3xl lg:text-4xl font-bold bg-gradient-to-r from-gray-900 to-gray-600 bg-clip-text text-transparent mb-4",children:t.title}),t.category&&e.jsx("div",{className:"flex items-center mb-6",children:e.jsx("span",{className:"bg-gradient-to-r from-blue-100 to-indigo-100 text-blue-800 px-3 py-1 rounded-full text-sm font-medium",children:t.category})}),e.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[e.jsx("div",{className:"flex space-x-1",children:[...Array(5)].map((u,x)=>e.jsx("span",{className:`text-lg ${x<Math.floor(t.average_rating||0)?"text-yellow-400":"text-gray-300"}`,children:"★"},x))}),e.jsxs("span",{className:"text-blue-600 font-medium hover:text-blue-800 transition-colors cursor-pointer",children:["(",t.average_rating?.toFixed(1)||"0.0",") ratings"]})]}),e.jsx("div",{className:"h-px bg-gradient-to-r from-transparent via-gray-300 to-transparent my-6"}),e.jsxs("div",{className:"flex items-baseline space-x-2 mb-6",children:[e.jsx("span",{className:"text-lg text-gray-600",children:"$"}),e.jsx("span",{className:"text-4xl font-bold amazon-gradient-text",children:t.unit_price}),e.jsx("span",{className:"text-gray-500 text-lg",children:"USD"})]}),t.stock===0?e.jsx("div",{className:"bg-gradient-to-r from-red-50 to-red-100 border-l-4 border-red-500 p-4 rounded-2xl mb-6 shadow-sm",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("svg",{className:"w-5 h-5 text-red-500 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),e.jsx("p",{className:"text-red-700 font-semibold",children:"Out of Stock"})]})}):t.stock<=10&&e.jsx("div",{className:"bg-gradient-to-r from-orange-50 to-yellow-50 border-l-4 border-orange-500 p-4 rounded-2xl mb-6 shadow-sm",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("svg",{className:"w-5 h-5 text-orange-500 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),e.jsxs("p",{className:"text-orange-700 font-medium",children:["Only ",t.stock," left in stock"]})]})}),e.jsx("div",{className:"h-px bg-gradient-to-r from-transparent via-gray-300 to-transparent my-6"}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center",children:[e.jsx("svg",{className:"w-5 h-5 mr-2 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"About this item"]}),e.jsx("div",{className:"bg-gradient-to-r from-gray-50 to-blue-50/50 p-4 rounded-2xl border border-gray-200/50",children:e.jsx("p",{className:"text-gray-700 leading-relaxed",children:t.description})})]}),e.jsx("div",{className:"hidden lg:block",children:e.jsx(M,{product:t})})]})})]}),e.jsx("div",{className:"lg:hidden mt-8",children:e.jsx("div",{className:"glass-card p-6 rounded-3xl shadow-2xl border border-white/30",children:e.jsx(M,{product:t})})}),e.jsx("div",{className:"h-px bg-gradient-to-r from-transparent via-gray-300 to-transparent my-12"}),e.jsx("div",{className:"mt-12",children:e.jsxs("div",{className:"glass-card p-8 rounded-3xl shadow-2xl border border-white/30",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between mb-8 gap-4",children:[e.jsx("h2",{className:"text-3xl font-bold bg-gradient-to-r from-gray-900 to-gray-600 bg-clip-text text-transparent",children:"Customer Reviews"}),l&&!v&&e.jsxs("button",{onClick:()=>n(!s),className:"btn-primary text-sm relative overflow-hidden group",children:[e.jsx("span",{className:"relative z-10",children:s?"Cancel Review":"Write a Review"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent -translate-x-full group-hover:translate-x-full transition-transform duration-700 ease-out"})]})]}),e.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 p-6 rounded-2xl mb-8 border border-blue-200/50 shadow-sm",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center space-y-4 sm:space-y-0 sm:space-x-6",children:[e.jsxs("div",{className:"text-center sm:text-left",children:[e.jsx("div",{className:"text-4xl font-bold amazon-gradient-text mb-2",children:t.average_rating?.toFixed(1)||"0.0"}),e.jsx("div",{className:"flex justify-center sm:justify-start space-x-1",children:[...Array(5)].map((u,x)=>e.jsx("span",{className:`text-xl ${x<Math.floor(t.average_rating||0)?"text-yellow-400":"text-gray-300"}`,children:"★"},x))})]}),e.jsxs("div",{className:"text-center sm:text-left",children:[e.jsxs("p",{className:"text-gray-600 font-medium",children:["Based on ",c.length," review",c.length!==1?"s":""]}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Share your thoughts with other customers"})]})]})}),l&&v&&e.jsx("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200 text-green-700 px-6 py-4 rounded-2xl mb-6 shadow-sm",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("svg",{className:"w-5 h-5 text-green-500 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),e.jsx("span",{className:"font-medium",children:"Thank you! You have already reviewed this product."})]})}),s&&e.jsx("div",{className:"mb-8 bg-gradient-to-r from-blue-50 to-indigo-50 p-6 rounded-2xl border border-blue-200/50",children:e.jsx(H,{productId:r,onReviewSubmitted:w,onCancel:()=>n(!1)})}),e.jsx("div",{className:"space-y-6",children:h?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"loading-spinner w-8 h-8 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"Loading reviews..."})]}):c.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-gradient-to-br from-gray-100 to-gray-200 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})})}),e.jsx("p",{className:"text-gray-500 mb-4 text-lg font-medium",children:"No reviews yet. Be the first to review!"}),!l&&e.jsxs("p",{className:"text-sm text-gray-400",children:[e.jsx("a",{href:"/login",className:"text-blue-600 hover:text-blue-800 font-medium hover:underline transition-colors",children:"Sign in"})," ","to write a review"]})]}):c.map(u=>e.jsx("div",{className:"bg-white/60 backdrop-blur-sm rounded-2xl p-6 shadow-sm border border-gray-200/50 hover:shadow-md transition-all duration-300",children:e.jsx($,{review:u})},u.id))})]})})]})]}):e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:"Product not found"})}export{I as default};
