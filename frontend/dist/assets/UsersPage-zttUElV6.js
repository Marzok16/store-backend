import{r as t,j as e}from"./index-JYwPDSlk.js";import{d as o}from"./dashboard-D_-zjPrw.js";function f({title:a,titleId:r,...i},n){return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":r},i),a?t.createElement("title",{id:r},a):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 7.5v3m0 0v3m0-3h3m-3 0h-3m-2.25-4.125a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0ZM3 19.235v-.11a6.375 6.375 0 0 1 12.75 0v.109A12.318 12.318 0 0 1 9.374 21c-2.331 0-4.512-.645-6.374-1.766Z"}))}const p=t.forwardRef(f),b=()=>{const[a,r]=t.useState([]),[i,n]=t.useState(!0),[l,d]=t.useState(null),[c,m]=t.useState(null);t.useEffect(()=>{x()},[]);const x=async()=>{try{n(!0);const s=await o.getUsers();r(s.data)}catch(s){d(s.response?.data?.error||"Failed to fetch users")}finally{n(!1)}},h=async s=>{if(window.confirm("Are you sure you want to make this user an admin?"))try{await o.makeUserAdmin(s),m("User has been made an admin successfully"),x(),setTimeout(()=>m(null),3e3)}catch(u){d(u.response?.data?.error||"Failed to make user admin")}};return i?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-600"})}):e.jsxs("div",{children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Users"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Manage user accounts and permissions"})]}),l&&e.jsx("div",{className:"mb-4 bg-red-50 border border-red-200 rounded-md p-4",children:e.jsx("p",{className:"text-sm text-red-600",children:l})}),c&&e.jsx("div",{className:"mb-4 bg-green-50 border border-green-200 rounded-md p-4",children:e.jsx("p",{className:"text-sm text-green-600",children:c})}),e.jsxs("div",{className:"bg-white shadow overflow-hidden sm:rounded-md",children:[e.jsxs("div",{className:"px-4 py-5 sm:px-6",children:[e.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:"All Users"}),e.jsx("p",{className:"mt-1 max-w-2xl text-sm text-gray-500",children:"A list of all registered users in the system"})]}),e.jsx("ul",{className:"divide-y divide-gray-200",children:a.map(s=>e.jsx("li",{children:e.jsxs("div",{className:"px-4 py-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:e.jsx("div",{className:"h-10 w-10 rounded-full bg-gray-300 flex items-center justify-center",children:e.jsx("span",{className:"text-sm font-medium text-gray-700",children:s.email.charAt(0).toUpperCase()})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:s.first_name&&s.last_name?`${s.first_name} ${s.last_name}`:s.email}),e.jsx("div",{className:"text-sm text-gray-500",children:s.email}),e.jsxs("div",{className:"text-sm text-gray-500",children:["Joined: ",new Date(s.date_joined).toLocaleDateString()]})]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex space-x-2",children:[s.is_staff&&e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Admin"}),s.is_active?e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Active"}):e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:"Inactive"})]}),!s.is_staff&&e.jsxs("button",{onClick:()=>h(s.id),className:"inline-flex items-center px-3 py-1 border border-transparent text-xs font-medium rounded text-blue-700 bg-blue-100 hover:bg-blue-200",children:[e.jsx(p,{className:"h-3 w-3 mr-1"}),"Make Admin"]})]})]})},s.id))}),a.length===0&&e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-500",children:"No users found"})})]})]})};export{b as default};
